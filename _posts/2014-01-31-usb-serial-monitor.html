---
layout: post
title: USB Serial Monitor
date: '2014-01-31T16:28:00.000-08:00'
author: Dave Hylands
tags:
- Python
modified_time: '2014-06-15T10:16:14.656-07:00'
blogger_id: tag:blogger.com,1999:blog-2189571833278528716.post-5048586196121051252
blogger_orig_url: http://blog.davehylands.com/2014/01/usb-serial-monitor.html
---

Lately, I've been working with USB Serial devices, and I've discovered that many serial programs don't like it when the serial device is disconnected.<br /><br />So I decided to write my own little monitor program in python. It hooks into pyudev to get the add/remove notifications when usb devices are plugged in or removed (so currently it only works under linux).<br /><br />Source code can be found <a href="https://github.com/dhylands/usb-ser-mon" target="_blank">here</a>. It requires pyudev version 0.16 or newer.<br /><br />If you run: <br /><pre class="prettyprint"><span class="nocode">./usb-ser-mon.py -l</span></pre>it will show you the currently connected devices. <br /><pre class="prettyprint"><span class="nocode"><br />USB Serial Device with vendor 'Teensyduino' serial '21973' found @/dev/ttyACM1<br />USB Serial Device with vendor 'Prolific_Technology_Inc.' found @/dev/ttyUSB0<br />USB Serial Device with vendor 'STMicroelectronics' serial '00000000050C' found @/dev/ttyACM0<br /></span></pre>If you want to connect with the STM device (an STM32FDISCOVERY board in this situation), then you might do: <br /><pre class="prettyprint"><span class="nocode"><br />1247 &gt;./usb-ser-mon.py -n Teensy<br />USB Serial device with vendor 'Teensyduino' serial '21973' connected @/dev/ttyACM1<br /><br />&gt;&gt;&gt;</span></pre>In the previous example the Teensy was already connected. If I unplug and replug the Teensy device then I'd see: <br /><pre class="prettyprint"><span class="nocode"><br /><br />USB Serial device @ /dev/ttyACM1&nbsp; disconnected.<br /><br />Waiting for USB Serial Device with vendor 'Teensy' ...<br />USB Serial device with vendor 'Teensyduino' serial '21973' connected @/dev/ttyACM1<br />Done executing '/src/main.py'<br />Micro Python for Teensy 3.1<br />Type "help()" for more information.<br />&gt;&gt;&gt;</span></pre>You only need to use as many characters as are required to uniquely identify a device, so I could use: <br /><pre class="prettyprint"><span class="nocode">./usb-ser-mon.py -n STM</span></pre>to connect to the Discovery board.<br /><script>prettyPrint(); </script> 